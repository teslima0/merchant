{% extends 'products/base.html' %}


{% block content %}
  

<div class="container">

  <div class="row justify-content-center">
      <div class="col-md-8">
        <a href="{% url 'Product:showProducts' %}" class="btn mt-2" style="background-color: rgb(243, 12, 235)">Back</a>
          <div class="card m-5 p-2" style="width: 25rem;">
              <img src="{{ eachProduct.image.url }}" class="card-img-top" alt="...">
              <div class="card-body">
                  <h5 class="card-title m-1"><b >Name:</b> {{ eachProduct.name }}</h5>
                  <h4 class="card-subtitle m-1"><b>Price:</b> ${{ eachProduct.price }}</h4>
                  <p style="font-size: 14px;" class="btn btn-warning m-1 p-1">{{ eachProduct.category.name }}</p>
                  <hr>
                  <p style="font-size: 15px;" class="card-text mt-1">Description: {{ eachProduct.description }}</p>
                  <p style="font-size: 15px;" class="card-text mt-1"><a href="{{ eachProduct.web}}" class="btn btn-primary m-1">Pay Now</a></p>
                  <p style="font-size: 13px;" class="cart-text mt-1">added - {{ eachProduct.created_at }}</p>
                  {% if user.is_authenticated %}
                    {% if user.user_type == '1' %}
                        <a href="{% url 'Product:deleteProduct' eachProduct.id %}" class="btn btn-danger m-1"> Delete </a>
                        <a href="{% url 'Product:updateProduct' eachProduct.id %}" class="btn btn-primary m-1"> Update </a>
                        {% endif  %}
                    {% endif  %}
                </div>
          </div>
      </div>

      <div class="col-md-4">
         <div style="margin: 5px; padding: 2px">
            Add Comments ({{ num_comments }})
            <br>
            <hr>

            {% if not eachProduct.comments.all %}

                <p>Not comments added yet...</p>
               <p><a class="btn " style="background-color: rgb(243, 12, 235)" href="{% url 'Product:add-comment' eachProduct.id %}">  Add Comment </a></p>

            {% else %}

                {% for comment in eachProduct.comments.all %}

                    <h5><strong>{{ comment.commenter_name }}</strong></h5>
                    <p>{{ comment.comment_body }}</p>
                    <p><small>{{ comment.date_added }}</small></p>

                    {% if request.user.username == comment.commenter_name %}

                        <p><a class="btn btn-primary" href="{% url 'Product:add-comment' eachProduct.id %}">  Add Comment </a></p>
                        <p><a class="btn btn-danger" href="{% url 'Product:delete-comment' eachProduct.id %}">  Delete Comment </a></p>
                      
                      
                    {% endif %}
                    
                    

                {% endfor %}

            {% endif %}

    

         </div>
      </div>
  </div>

</div>


{% endblock %}

